<head>
  <title>Socrenchus</title>
</head>

<body>
  {{> body}}
</body>

<template name="body">
  <div id='main'>
    <div id='instance-bar'>
      <img id='instance-logo' src='/images/logo.png' onclick='location.href="/"' style="cursor:pointer">
      <!--Inline style: this should go in css.-->
    </div>
    {{> sessionBar}}
    <div id='page'>
      <div id='page-header'></div>
      <div id='page-body'>
        {{> notifications}}
        {{> stream}}
      </div>
      <div id='page-footer'></div>
    </div>
  </div>
</template>

<template name="sessionBar">
  <div id='session-bar'>
    <span id='login-status'>You are logged in as <span class="sessionBarUserName">{{username}}</span>. </span>
      <span id='logout-button'>
        <a id='logout-link' href="">Logout</a>
      </span>
    </div>
</template>

<template name="stream">
  <div id='stream'>
    {{#if new}}
      <div id='new-assignment'></div>
    {{/if}}
    <ul id='assignments' class='sortable ui-helper-reset'>
      <!--http://handlebarsjs.com/#iteration-->
      {{#each posts}}
        {{> post}}
      {{/each}}
    </ul>
    <div id='footer'></div>
  </div>
</template>

<template name="group">
    <h1>{{group_name}}</h1>
    <ul>
      {{#each posts}}
        {{> post}}
      {{/each}}
    </ul>
</template>

<template name="notifications">
  <h3 id='notification-counter' class="unselectable">{{count}}</h3>
  {{#if show}}
    <div id='notification-box'>
      {{#each ntfs}}
        <div class='notify-message'>{{message}}</div>
      {{/each}}
    </div>
  {{/if}}
</template>
  
  <!-- 
  Philip's New Post Style 6/12/12
  
  Design goals: 
  Clarity of structure
  -Recursive properties of posts evident in the visible structure.        
  Readability of elements
  Helpfulness to posters
    -->

<template name="post">
  <div id="post-{{identifier}}-{{../group_name}}" class="post">
    
    <div class="main">
      <div class="body">
        {{{content}}}
      </div>
      <div class="attributes">
        <div class="votebox">
          [Votebox]
        </div>
        <div class="tagbox">
          [Tagbox]
        </div>
      </div>
    </div>
    
    <div class="reply-section">
      <div class="your-reply" id="reply-{{identifier}}-{{../group_name}}">
        <textarea name="replyText" id="replyText-{{identifier}}-{{../group_name}}" cols="70" rows="7"></textarea>
        <button name="replySubmit" id="replySubmit-{{identifier}}-{{../group_name}}" type="button">Post Reply!</button>
        <!--<button name="replyCancel" id="replyCancel-{{identifier}}" type="button">^</button>--><!--Hidden from Bryan-->
      </div>
      <div class="other-replies">
        <ul>
          {{#each groups}}
            <li>{{> group}}</li>
          {{/each}}
        </ul>
      </div>      
    </div>
  </div>
</template>
