$(document).ready(function(){function k(a){for(var c={},g=0;g<a.length;g++)c[a[g]]="";return 0==a.length?null:c}var f=decodeURI(window.location.pathname).split("/");for(i=0;i<f.length;i++);2==f.length&&f[1]&&$.get("/ajax/answer",{question_id:f[1]});$.each(["multipleAnswerQuestionTemplate","questionStatsTemplate","graderQuestionTemplate","shortAnswerQuestionTemplate","badgeTemplate"],function(a,c){$("#"+c).template(c)});var j=function(a){var c=function(){var b={question_id:a.key,answer:[],"class":a._class};
$.each(a._class,function(e,d){switch(d){case "aConfidentGraderQuestion":case "aGraderQuestion":b.answer=$("#"+a.key+" #answer").text();break;case "aBuilderQuestion":case "aShortAnswerQuestion":b.answer=$("#"+a.key+" #answer").val();break;case "aMultipleChoiceQuestion":b.answer=$("input:radio[name="+a.key+"]:checked").val();break;case "aMultipleAnswerQuestion":var c=$("input:checkbox[name="+a.key+"]:checked");$.each(c,function(){b.answer.push($(this).val())});0==b.answer.length&&b.answer.push("None of the above")}});
return b};if(void 0==a.answer)a.answer=null;var g={aMultipleAnswerQuestion:function(){var b=a.answer;if(b&&0<=b.length)a.answer=[],$.each(b,function(b,d){a.answer.push(d.value)}),a.answer=k(a.answer);return"multipleAnswerQuestionTemplate"},aShortAnswerQuestion:function(){a.confident=a.answer&&0.5<=a.answer.confidence;if(a.answer)a.score=a.answer.correctness;return"shortAnswerQuestionTemplate"},aGraderQuestion:function(){a.question.author={nickname:"Personal Assistant"};return"graderQuestionTemplate"},
aBuilderQuestion:function(){return a.answer?"questionStatsTemplate":"shortAnswerQuestionTemplate"}},f={aGraderQuestion:function(){var b={slide:function(b,d){$("#"+a.key+" #answer").text(d.value)}};if(a.answer)b.disabled=!0,b.value=a.answer,$("#"+a.key+" #answer").text(a.answer);$("#slider").slider(b)},aBuilderQuestion:function(){if(a.answer){$("#"+a.key+" #question-text").text(a.answer.value).autoResize().trigger("keydown");var b=[],e=[];a.hasOwnProperty("gradeDistribution")&&($.each(a.gradeDistribution,
function(a,e){b.push([10*a,e])}),$.each(a.confidentGradeDistribution,function(a,b){e.push([10*a,b])}),$.plot($("#"+a.key+" #chart"),[{label:"Graded by Algorithm",data:b,bars:{show:!0,barWidth:10,align:"center"},stack:!0},{label:"Graded by You",data:e,bars:{show:!0,barWidth:10,align:"center"},stack:!0}],{yaxis:{show:!0},xaxis:{show:!0}}))}}},h="errorTemplate";$.each(a._class,function(a,e){var d=g[e];d&&(h=d())});$.tmpl(h,a).prependTo("#assignments").click(function(a){"submit"==a.target.id&&(window.history.pushState("object or string",
"Title","/"),scrollTo(0,0),$.getJSON("/ajax/answer",c(),function(a){if(a)for(var b=0;b<a.length;b++)$("#"+a[b].key).remove(),j(a[b])}))});$.tmpl("badgeTemplate",a).prependTo("#"+a.key+" #badge");$("#"+a.key+" #question-text").text(a.question.value).autoResize().trigger("keydown");$.each(a._class,function(a,c){var d=f[c];d&&d()})};(function(){$.getJSON("/ajax/stream",function(a){""!=a&&($("#learn > div").remove(),$("#logout").attr("href",a.logout),a.assignments.forEach(function(a){j(a)}),$(".autoResizable").autoResize({onResize:function(){$(this).css({opacity:0.8})},
animateCallback:function(){$(this).css({opacity:1})},animateDuration:300}).trigger("keydown"),$(function(){$(".defaultText").focus(function(){$(this).val()==$(this)[0].title&&($(this).removeClass("defaultTextActive"),$(this).val(""))});$(".defaultText").blur(function(){""==$(this).val()&&($(this).addClass("defaultTextActive"),$(this).val($(this)[0].title))});$(".defaultText").blur()}))})})()});
