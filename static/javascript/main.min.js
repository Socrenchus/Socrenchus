$(document).ready(function(){function f(a){for(var b={},d=0;d<a.length;d++)b[a[d]]="";return 0==a.length?null:b}var e=decodeURI(window.location.pathname).split("/");for(i=0;i<e.length;i++);2==e.length&&$.get("/ajax/answer",{question_id:e[1]});$("#questionTemplate").template("questionTemplate");$("#questionStatsTemplate").template("questionStatsTemplate");var g=function(a){a._class=f(a._class);a.confident=!0;var b=a.answer;if(b&&0<=b.length)$.each(b,function(b,c){a.answer.push(c.value)}),a.answer=
f(a.answer);if("aConfidentGraderQuestion"in a._class)a.question.author=a.answerInQuestion.author;else if("aShortAnswerQuestion"in a._class&&(a.confident=a.answer&&0.5<=a.answer.confidence,a.answer))a.score=a.answer.correctness;if("aBuilderQuestion"in a._class&&a.answer){$("#"+a.key).remove();$.tmpl("questionStatsTemplate",a).prependTo("#assignments");var d=[],e=[];$.each(a.estimatedGrades,function(a,c){d.push([a,c])});$.each(a.confidentGrades,function(a,c){e.push([a,c])});$.plot($("#chart_"+a.key),
[{label:"Grading Algorithm",data:d},{label:"Your Grading",data:e}],{yaxis:{max:1}})}else $.tmpl("questionTemplate",a).prependTo("#assignments").click(function(b){if("submit"==b.target.id){window.history.pushState("object or string","Title","/");scrollTo(0,0);var c={question_id:a.key,answer:[],"class":a._class};"aShortAnswerQuestion"in a._class||"aBuilderQuestion"in a._class?c.answer=$("#"+a.key+" #answer").val():"aMultipleChoiceQuestion"in a._class?c.answer=$("input:radio[name="+a.key+"]:checked").val():
"aMultipleAnswerQuestion"in a._class&&(b=$("input:checkbox[name="+a.key+"]:checked"),$.each(b,function(){c.answer.push($(this).val())}),0==c.answer.length&&c.answer.push("None of the above"));$.getJSON("/ajax/answer",c,function(b){if(b){var c=b.length;c&&$("#"+a.key).remove();for(var d=0;d<c;d++)g(b[d])}})}})};(function(){$.getJSON("/ajax/stream",function(a){""!=a&&($("#learn > div").remove(),$("#logout").attr("href",a.logout),a.assignments.forEach(function(a){g(a)}),$(".autoResizable").autoResize({onResize:function(){$(this).css({opacity:0.8})},
animateCallback:function(){$(this).css({opacity:1})},animateDuration:300,extraSpace:40}),$(function(){$(".defaultText").focus(function(){$(this).val()==$(this)[0].title&&($(this).removeClass("defaultTextActive"),$(this).val(""))});$(".defaultText").blur(function(){""==$(this).val()&&($(this).addClass("defaultTextActive"),$(this).val($(this)[0].title))});$(".defaultText").blur()}))})})()});