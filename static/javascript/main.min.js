$(document).ready(function(){function j(a){for(var c={},f=0;f<a.length;f++)c[a[f]]="";return 0==a.length?null:c}var d=decodeURI(window.location.pathname).split("/");for(i=0;i<d.length;i++);2==d.length&&d[1]&&$.get("/ajax/answer",{question_id:d[1]});$.each(["multipleAnswerQuestionTemplate","questionStatsTemplate","confidentGraderQuestionTemplate","shortAnswerQuestionTemplate"],function(a,c){$("#"+c).template(c)});var h=function(a){var c=function(){var b={question_id:a.key,answer:[],"class":a._class};
$.each(a._class,function(k,e){switch(e){case "aBuilderQuestion":case "aShortAnswerQuestion":b.answer=$("#"+a.key+" #answer").val();break;case "aMultipleChoiceQuestion":b.answer=$("input:radio[name="+a.key+"]:checked").val();break;case "aMultipleAnswerQuestion":var c=$("input:checkbox[name="+a.key+"]:checked");$.each(c,function(){b.answer.push($(this).val())});0==b.answer.length&&b.answer.push("None of the above")}});return b};if(void 0==a.answer)a.answer=null;var f={aMultipleAnswerQuestion:function(){a.answer=
a.answerList;if(void 0==a.answer)a.answer=null;var b=a.answer;if(b&&0<=b.length)a.answer=[],$.each(b,function(b,e){a.answer.push(e.value)}),a.answer=j(a.answer);return"multipleAnswerQuestionTemplate"},aShortAnswerQuestion:function(){a.confident=a.answer&&0.5<=a.answer.confidence;if(a.answer)a.score=a.answer.correctness;return"shortAnswerQuestionTemplate"},aConfidentGraderQuestion:function(){a.question.author=a.answerInQuestion.author;return"confidentGraderQuestionTemplate"},aBuilderQuestion:function(){return a.answer?
"questionStatsTemplate":"shortAnswerQuestionTemplate"}},d={aConfidentGraderQuestion:function(){if(a.answer){var b=[],c=[];a.hasOwnProperty("estimatedGrades")&&($.each(a.estimatedGrades,function(a,c){b.push([a,c])}),$.each(a.confidentGrades,function(a,b){c.push([a,b])}),$.plot($("#chart_"+a.key),[{label:"Grading Algorithm",data:b},{label:"Your Grading",data:c}],{yaxis:{max:1,show:!1},xaxis:{show:!1}}))}}},g="errorTemplate";$.each(a._class,function(a,c){var e=f[c];e&&(g=e())});$.tmpl(g,a).prependTo("#assignments").click(function(b){"submit"==
b.target.id&&(window.history.pushState("object or string","Title","/"),scrollTo(0,0),$.getJSON("/ajax/answer",c(),function(b){if(b){var c=b.length;c&&$("#"+a.key).remove();for(var d=0;d<c;d++)h(b[d])}}))});$.each(a._class,function(a,c){var e=d[c];e&&e()})};(function(){$.getJSON("/ajax/stream",function(a){""!=a&&($("#learn > div").remove(),$("#logout").attr("href",a.logout),a.assignments.forEach(function(a){h(a)}),$(".autoResizable").autoResize({onResize:function(){$(this).css({opacity:0.8})},animateCallback:function(){$(this).css({opacity:1})},
animateDuration:300,extraSpace:40}),$(function(){$(".defaultText").focus(function(){$(this).val()==$(this)[0].title&&($(this).removeClass("defaultTextActive"),$(this).val(""))});$(".defaultText").blur(function(){""==$(this).val()&&($(this).addClass("defaultTextActive"),$(this).val($(this)[0].title))});$(".defaultText").blur()}))})})()});
