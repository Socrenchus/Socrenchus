(function(l){l.plot.plugins.push({init:function(l){l.hooks.processDatapoints.push(function(a,j,r){if(null!=j.stack){for(var h,a=a.getData(),e=null,g=0;g<a.length&&!(j==a[g]);++g)a[g].stack==j.stack&&(e=a[g]);if(h=e){a=r.pointsize;e=r.points;g=h.datapoints.pointsize;h=h.datapoints.points;var b=[],o,l,p,i,n,q,s=j.lines.show;i=j.bars.horizontal;var u=2<a&&(i?r.format[2].x:r.format[2].y),j=s&&j.lines.steps;p=!0;for(var t=i?1:0,k=i?0:1,c=0,f=0,d;!(c>=e.length);){d=b.length;if(null==e[c]){for(m=0;m<a;++m)b.push(e[c+
m]);c+=a}else if(f>=h.length){if(!s)for(m=0;m<a;++m)b.push(e[c+m]);c+=a}else if(null==h[f]){for(m=0;m<a;++m)b.push(null);p=!0;f+=g}else{o=e[c+t];l=e[c+k];i=h[f+t];n=h[f+k];q=0;if(o==i){for(m=0;m<a;++m)b.push(e[c+m]);b[d+k]+=n;q=n;c+=a;f+=g}else if(o>i){if(s&&0<c&&null!=e[c-a]){p=l+(e[c-a+k]-l)*(i-o)/(e[c-a+t]-o);b.push(i);b.push(p+n);for(m=2;m<a;++m)b.push(e[c+m]);q=n}f+=g}else{if(p&&s){c+=a;continue}for(m=0;m<a;++m)b.push(e[c+m]);s&&0<f&&null!=h[f-g]&&(q=n+(h[f-g+k]-n)*(o-i)/(h[f-g+t]-i));b[d+k]+=
q;c+=a}p=!1;d!=b.length&&u&&(b[d+2]+=q)}if(j&&d!=b.length&&0<d&&null!=b[d]&&b[d]!=b[d-a]&&b[d+1]!=b[d-a+1]){for(m=0;m<a;++m)b[d+a+m]=b[d+m];b[d+1]=b[d-a+1]}}r.points=b}}})},options:{series:{stack:null}},name:"stack",version:"1.2"})})(jQuery);
